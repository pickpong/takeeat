<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Title</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="/css/myPage/reviewModifyFormStyle.css">
</head>
<body>

<div id="contents">

    <div id="titleContainer">
        <div><img id="backIcon" src="/images/back-icon.png" onclick="history.back(-1);"/></div>
        <div id="writeReviewTitle"><strong>리뷰쓰기</strong></div>
    </div>
    <hr/>

    <form id="reviewForm" action="/my/review/modify" method="post" enctype="multipart/form-data">
        <div id="formContainer">
            <div id="marketName"><strong>[[${reviewModifyFormResponse.marketName}]]</strong></div>
            <div class="star_rating">
                <span class="star on" value="1"></span>
                <span class="star on" value="2"></span>
                <span class="star on" value="3"></span>
                <span class="star on" value="4"></span>
                <span class="star on" value="5"></span>
            </div>
            <input type="hidden" name="rating" th:value="${reviewModifyFormResponse.reviewRating}"/>
            <textarea name="content" id="content" rows="5" placeholder="음식의 맛, 포장 상태 등 음식에 대한 솔직한 리뷰를 남겨주세요. (필수)">[[${reviewModifyFormResponse.content}]]</textarea>
        </div>
        <div id="imageUploadTitle"><strong>사진 추가하기 (선택)</strong></div>
        <div id="imageUploadContainer">
            <label for="fileInput">
                <div class="btn-upload">사진 첨부</div>
            </label>
                <input type="file" name="file" id="fileInput" accept="image/*" multiple>
            <img src="/images/delete-button.png" id="deleteImageBtn"/>
            <br/>
            <div id="imageUploadAlert">* 사진은 최대 3장까지 첨부할 수 있습니다.</div>
            <div id="imagePreviewContainer" style="height: 150px;">
                <th:block th:each="reviewImage : ${reviewModifyFormResponse.reviewImages}">
                    <img class="preview-image" th:src="${reviewImage}"/>
                </th:block>
            </div>
        </div>
        <input type="hidden" name="reviewId" th:value="${param.reviewId}"/>
        <input type="hidden" id="imageModifyFlag" name="imageModifyFlag" value="0"/>
    </form>

    <div id="bottomBtnContainer">
        <div id="writeReviewAlert">
            • 작성한 리뷰는 닉네임, 프로필 이미지와 함께 누구나 볼 수 있도록 공개됩니다. 리뷰 내용에 민감한 개인정보가 포함되지 않도록 조심해주세요.<br/>
            • 솔직하게 작성하신 리뷰는 주문을 고민하는 분들께 큰 도움이 됩니다. 하지만 허위리뷰나 명예훼손, 욕설, 타인비방글 등 선량한 업주나 제 3자의 권리를 침해하는 게시물은 서비스 이용약관이나 관련 법률에 따라 제재를 받을 수 있습니다.<br/>
            • TAKE EAT은 위와 같은 게시물 작성자에게 경고, 주의 등의 조치를 취할 수 있고, 해당 게시물을 삭제하거나 보이지 않게 할 수 있습니다. 게시에 따른 책임은 작성자에게 있으며, TAKE EAT은 이에 대한 법적 책임을 지지 않습니다.
        </div>
        <div id="modifyReviewBtn"><strong>완료</strong></div>
    </div>

    <div class="modal" id="modifyCompleteModal" tabindex="-1" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">TAKE EAT</h5>
                </div>
                <div class="modal-body">
                    리뷰 수정이 완료되었습니다.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" onclick="location.href='/my/review/list'" style="background: #ffb36f;">확인</button>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="/js/myPage/reviewModifyForm.js"></script>
</body>
</html>